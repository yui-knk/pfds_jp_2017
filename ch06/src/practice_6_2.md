## (a)

不変条件が "2|f| >= |r|" であっても、 snoc = 1, tail = 2 の
負債を返済すると考えればよい。

この場合、 "D(i) <= min(2i, 2|f| - |r|)" を常に満たせば、

* 先頭ノードの負債が返済済み
* 回転が起きる直前にはキュー全体の負債が返済済み

の両方を満たせる。

1. 回転のない snoc の場合

"|r|" が1増え、 "2|f| - |r|" が1減るので、定理6.1と同様。

2. 回転のない tail の場合

"|f|"が1減ると "2|f| - |r|" は2減る。インデックスも2減る。結局
"min(2i, 2|f| - |r|)" は2減るので、これは定理6.1と同様に扱える。

3. 回転する場合

回転時に

* "f = 2m"
* "r = m + 1"

とする。
append は 2m の負債を生み、 reverse が m+1 の負債を生む。
append のコストは index 0 から index 2m-1 の 2m こにそれぞれ負担させ、
reverse のコストは index 2m に負担させる。

D(2m) = 2m + (m+1) <= min(2*2m, 2m+1 - 0)

が成立するので、不変条件に違反しない。



