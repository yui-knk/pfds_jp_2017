## P.99

`[1,2,3]`の例:

```
WORKING ([1,2,3], [])
WORKING ([2,3], [1])
WORKING ([3], [2,1])
WORKING ([], [3,2,1])
DONE ([3,2,1])
```

## P.100 (AppendState)

`append [1,2], [3,4]`の例:

```
REVERSING ([1,2], [], [3,4])
REVERSING ([2], [1], [3,4])
REVERSING ([], [2,1], [3,4])
APPENDING ([2,1], [3,4])
APPENDING ([1], [2,3,4])
APPENDING ([], [1,2,3,4])
DONE ([1,2,3,4])
```

## P.100 (RotationState)

`rotate [1,2], [5,4,3]`の例:

```
REVERSING ([1,2], [], [5,4,3], [])
REVERSING ([2], [1], [4,3], [5])
REVERSING ([], [2,1], [3], [4,5])
APPENDING ([2,1], [3,4,5])
APPENDING ([1], [2,3,4,5])
APPENDING ([], [1,2,3,4,5])
DONE ([1,2,3,4,5])
```

## How it works

* exec -> 1つ分進行させるための関数
* invalidate -> 1つpopしたときの関数

```
val q1 = (1,[],APPENDING (0,[],[1]),0,[])
val q2 = (1,[1],IDLE,1,[2])
val q3 = (3,[1],REVERSING (1,[],[1],[2],[3]),0,[])
val q4 = (3,[1],APPENDING (1,[1],[2,3]),1,[4])
val q5 = (3,[1],APPENDING (0,[],[1,2,3]),2,[5,4])
```

```
REVERSING (0, [], [], [1], []) # snoc 1
APPENDING (0, [], [1]) # exec

APPENDING (0, [], [1]) # snoc 2
DONE ([1]) # exec
IDLE # exec2

REVERSING (0, [1], [], [3,2], []) # snoc 3
REVERSING (1, [], [1], [2], [3]) # exec

REVERSING (1, [], [1], [2], [3]) # snoc 4
APPENDING (1, [1], [2,3]) # exec

APPENDING (1, [1], [2,3]) # snoc 5
APPENDING (0, [], [1,2,3]) # exec
```
